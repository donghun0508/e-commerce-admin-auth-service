project(':admin-auth-service-adapter:admin-auth-service-adapter-persistence') {

    dependencies {

        sourceSets {
            main {
                resources {
                    srcDirs 'src/main/resources/data',
                            'src/main/resources/database/mysql'
                }
            }
        }

        implementation 'com.querydsl:querydsl-jpa:5.0.0:jakarta'
        annotationProcessor "com.querydsl:querydsl-apt:${dependencyManagement.importedProperties['querydsl.version']}:jakarta"
        annotationProcessor "jakarta.annotation:jakarta.annotation-api"
        annotationProcessor "jakarta.persistence:jakarta.persistence-api"

        implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.9.0'

        implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
        runtimeOnly 'com.h2database:h2'
        runtimeOnly 'com.mysql:mysql-connector-j'

        implementation project(':admin-auth-service-application')
        implementation project(':admin-auth-service-domain')
        implementation project(':admin-auth-service-common')
    }
}

def generated = 'src/main/generated'

tasks.withType(JavaCompile).configureEach {
    options.getGeneratedSourceOutputDirectory().set(file(generated))
}

sourceSets {
    main.java.srcDirs += [generated]
}

clean {
    delete file(generated)
}